# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ?

‚úÖ **config.yaml** –æ–±–Ω–æ–≤–ª—ë–Ω (relaxed –ø—Ä–æ—Ñ–∏–ª—å, auto-tuning, temporal –∞–Ω–∞–ª–∏–∑)  
‚úÖ –°–æ–∑–¥–∞–Ω **whitelist** –ª–µ–≥–∏—Ç–∏–º–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (78 —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π)  
‚úÖ –°–æ–∑–¥–∞–Ω **—Ñ–∏–ª—å—Ç—Ä** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏  
‚úÖ –ù–∞–ø–∏—Å–∞–Ω–∞ **–ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## üéØ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ? (3 –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–∞)

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑

```bash
python main.py
```

**–ò–ª–∏** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º:

```bash
python run_and_compare.py
```

‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~1-2 –º–∏–Ω—É—Ç—ã

---

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

```bash
python analyze_anomalies.py
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ê–Ω–æ–º–∞–ª–∏–π: **22,000 ‚Üí 2,500-3,500** (‚Üì85-90%)
- ‚úÖ –ó–∞—Ç—Ä–æ–Ω—É—Ç–æ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π: **103% ‚Üí 15-20%** (–Ω–æ—Ä–º–∞–ª—å–Ω–æ!)
- ‚úÖ Geographic anomalies: **39.8% ‚Üí 25%** (–º–µ–Ω—å—à–µ —à—É–º–∞)
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö: **35% ‚Üí 15-20%** (—É–ø—Ä–∞–≤–ª—è–µ–º–æ)

---

### –®–∞–≥ 3: (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä

–î–æ–±–∞–≤–∏—Ç—å –≤ `main.py` –ø–æ—Å–ª–µ –¥–µ—Ç–µ–∫—Ü–∏–∏ –∞–Ω–æ–º–∞–ª–∏–π:

```python
# === –ù–û–í–´–ô –ö–û–î ===
from src.legitimate_pattern_filter import LegitimatePatternFilter

pattern_filter = LegitimatePatternFilter()
all_anomalies = pattern_filter.filter_anomalies(all_anomalies)
pattern_filter.save_whitelist("output/whitelist_applied.yaml")
# === –ö–û–ù–ï–¶ ===
```

–°–º. `CHANGES_APPLIED.md` —Ä–∞–∑–¥–µ–ª 3 –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| **CHANGES_APPLIED.md** | –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| **methodology_assessment.md** | –ê–Ω–∞–ª–∏–∑ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ |
| **legitimate_patterns_config.yaml** | Whitelist —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π |
| **config.yaml** | –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |

---

## üÜò –ü—Ä–æ–±–ª–µ–º—ã?

### –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∞–Ω–æ–º–∞–ª–∏–π?

–£–∂–µ—Å—Ç–æ—á–∏—Ç—å –ø–æ—Ä–æ–≥–∏ –≤ `config.yaml`:

```yaml
thresholds:
  geographic:
    regional_z_score: 4.0  # –±—ã–ª–æ 3.5
```

### –°–ª–∏—à–∫–æ–º –º–∞–ª–æ –∞–Ω–æ–º–∞–ª–∏–π?

–í–µ—Ä–Ω—É—Ç—å normal –ø—Ä–æ—Ñ–∏–ª—å:

```yaml
detection_profile: "normal"  # –±—ã–ª–æ relaxed
```

### –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `output/anomaly_detection.log`
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ `CHANGES_APPLIED.md`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python src/legitimate_pattern_filter.py` –¥–ª—è —Ç–µ—Å—Ç–∞

---

## ‚úÖ –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ | –≠—Ñ—Ñ–µ–∫—Ç |
|----------|---------|--------|
| 103% —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π –∞–Ω–æ–º–∞–ª—å–Ω—ã | Relaxed –ø—Ä–æ—Ñ–∏–ª—å + auto-tuning | ‚Üì80-85% |
| 40% geographic anomalies | –ü–æ—Ä–æ–≥–∏ 2.0‚Üí3.5 | ‚Üì60% |
| –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∑–æ–Ω—ã –∫–∞–∫ "–∞–Ω–æ–º–∞–ª–∏–∏" | Whitelist 78 —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è FP |
| –ù–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ | temporal: enabled | –¢—Ä–µ–Ω–¥—ã –∏ –¥–∏–Ω–∞–º–∏–∫–∞ |

---

**–ì–æ—Ç–æ–≤–æ! üéâ –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ.**
