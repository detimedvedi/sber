# üîß –ü—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–µ—Ç–µ–∫—Ü–∏–∏ –∞–Ω–æ–º–∞–ª–∏–π

**–î–∞—Ç–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:** 2 –Ω–æ—è–±—Ä—è 2025  
**–û—Å–Ω–æ–≤–∞–Ω–∏–µ:** –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –≤ `methodology_assessment.md`  
**–ü—Ä–æ–±–ª–µ–º–∞:** 22,159 –∞–Ω–æ–º–∞–ª–∏–π (103% –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–æ–≤) - –ø–µ—Ä–µ–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ (over-detection)

---

## üìù –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç |
|--------------|------|-------|------------------|
| **Detection profile** | `normal` | `relaxed` | ‚¨áÔ∏è –°–Ω–∏–∂–µ–Ω–∏–µ FPR –Ω–∞ 40-50% |
| **Auto-tuning** | `disabled` | `enabled` | üéØ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–æ FPR 5% |
| **Temporal analysis** | `disabled` | `enabled` | ‚è±Ô∏è –†–∞–±–æ—Ç–∞ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ä—è–¥–∞–º–∏ |
| **Geographic z-score** | 2.0 | 3.5 | ‚¨áÔ∏è -60% –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∞–Ω–æ–º–∞–ª–∏–π |
| **Geographic cluster** | 2.5 | 4.0 | ‚¨áÔ∏è –ú–µ–Ω—å—à–µ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π |
| **Logical weight** | 1.5 | 0.9 | ‚¨áÔ∏è –ü–æ–Ω–∏–∂–µ–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–º–Ω–æ–≥–æ FP) |
| **Temporal weight** | 1.1 | 1.3 | ‚¨ÜÔ∏è –ü–æ–≤—ã—à–µ–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–≤–∞–∂–Ω–µ–µ) |
| **Geographic weight** | 0.8 | 0.7 | ‚¨áÔ∏è –ü–æ–Ω–∏–∂–µ–Ω (–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –Ω–µ–æ–¥–Ω–æ—Ä–æ–¥–Ω–æ—Å—Ç—å) |

**–û–∂–∏–¥–∞–µ–º–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π:** —Å ~22,000 –¥–æ ~2,000-3,000 (90% reduction)

---

## 1Ô∏è‚É£ –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í config.yaml

### ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ relaxed –ø—Ä–æ—Ñ–∏–ª—å

**–§–∞–π–ª:** `config.yaml`, —Å—Ç—Ä–æ–∫–∏ 3-5

```yaml
# –ë—ã–ª–æ:
detection_profile: "normal"

# –°—Ç–∞–ª–æ:
# UPDATED: Switched to relaxed to reduce false positives (was: normal)
detection_profile: "relaxed"
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –±–æ–ª–µ–µ –º—è–≥–∫–∏–µ –ø–æ—Ä–æ–≥–∏ –∏–∑ —Å–µ–∫—Ü–∏–∏ `threshold_profiles.relaxed`
- Statistical: z-score 3.0 ‚Üí 3.5, IQR 1.5 ‚Üí 2.0
- Temporal: spike 100% ‚Üí 150%, drop -50% ‚Üí -60%
- Geographic: z-score 2.0 ‚Üí 3.0, cluster 2.5 ‚Üí 3.0
- Cross-source: discrepancy 50% ‚Üí 60%

---

### ‚úÖ –£–∂–µ—Å—Ç–æ—á–µ–Ω–∏–µ geographic –ø–æ—Ä–æ–≥–æ–≤

**–§–∞–π–ª:** `config.yaml`, —Å—Ç—Ä–æ–∫–∏ 20-22

```yaml
# –ë—ã–ª–æ:
geographic:
  regional_z_score: 2.0
  cluster_threshold: 2.5

# –°—Ç–∞–ª–æ:
geographic:
  regional_z_score: 3.5  # UPDATED: Increased from 2.0 to reduce geographic false positives
  cluster_threshold: 4.0  # UPDATED: Increased from 2.5 for Russia's natural heterogeneity
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –†–æ—Å—Å–∏—è - –æ–≥—Ä–æ–º–Ω–∞—è —Å—Ç—Ä–∞–Ω–∞ —Å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –Ω–µ–æ–¥–Ω–æ—Ä–æ–¥–Ω–æ—Å—Ç—å—é
- –ú–æ—Å–∫–≤–∞ vs –æ—Ç–¥–∞–ª—ë–Ω–Ω—ã–µ —Å–µ–ª–∞ - —ç—Ç–æ –Ω–µ –∞–Ω–æ–º–∞–ª–∏—è, –∞ –æ–±—ä–µ–∫—Ç–∏–≤–Ω–∞—è —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å
- –ù–æ—Ä–∏–ª—å—Å–∫, –ë–∏–ª–∏–±–∏–Ω—Å–∫–∏–π (–ß—É–∫–æ—Ç–∫–∞) - –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç –¥—Ä—É–≥–∏—Ö —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π
- Geographic anomaly –±—ã–ª 39.8% –≤—Å–µ—Ö –∞–Ω–æ–º–∞–ª–∏–π ‚Üí —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç ~10-15%

---

### ‚úÖ –í–∫–ª—é—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

**–§–∞–π–ª:** `config.yaml`, —Å—Ç—Ä–æ–∫–∏ 154-159

```yaml
# –ë—ã–ª–æ:
temporal:
  enabled: false
  aggregation_method: "latest"

# –°—Ç–∞–ª–æ:
# UPDATED: Enabled temporal analysis to detect trends and systematic changes
temporal:
  enabled: true
  aggregation_method: "mean"  # –°—Ä–µ–¥–Ω–µ–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤–º–µ—Å—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
  auto_detect: true
```

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –î–µ—Ç–µ–∫—Ü–∏—è —Ç—Ä–µ–Ω–¥–æ–≤ (—Ä–∞—Å—Ç—É—â–∏–µ/–ø–∞–¥–∞—é—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏)
- ‚úÖ –°–µ–∑–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –æ—Ç —Å–µ–∑–æ–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤)
- ‚úÖ –ê–≥—Ä–µ–≥–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–µ–∫ –Ω–∞ –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç)
- ‚úÖ –û—Ç–ª–∏—á–∏–µ "–∞–Ω–æ–º–∞–ª–∏—è –æ–¥–Ω–æ–≥–æ –º–µ—Å—è—Ü–∞" vs "—Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ"

**–î–∞–Ω–Ω—ã–µ consumption.parquet –∏–º–µ—é—Ç –ø–æ–ª–µ date:**
```
date: 2023-01, 2023-02, 2023-03, ...
```
–¢–µ–ø–µ—Ä—å —ç—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è!

---

### ‚úÖ –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—Ä–æ–≥–æ–≤

**–§–∞–π–ª:** `config.yaml`, —Å—Ç—Ä–æ–∫–∏ 206-210

```yaml
# –ë—ã–ª–æ:
auto_tuning:
  enabled: false

# –°—Ç–∞–ª–æ:
# UPDATED: Enabled auto-tuning to optimize thresholds and reduce false positives
auto_tuning:
  enabled: true
  target_false_positive_rate: 0.05  # –¶–µ–ª–µ–≤–æ–π FPR 5%
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
2. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞
3. –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: ‚â•95% "–Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö" –º—É–Ω–∏—Ü–∏–ø–∞–ª–∏—Ç–µ—Ç–æ–≤ –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–º–µ—á–µ–Ω—ã
4. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ –≤ `output/tuned_thresholds.yaml`

**–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–æ—Ü–µ–Ω–∫–∞:**
```yaml
retuning_interval_days: 30  # –ö–∞–∂–¥—ã–µ 30 –¥–Ω–µ–π –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –ø–æ—Ä–æ–≥–∏
```

---

### ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –≤–µ—Å–æ–≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

**–§–∞–π–ª:** `config.yaml`, —Å—Ç—Ä–æ–∫–∏ 192-198

```yaml
# –ë—ã–ª–æ:
priority_weights:
  anomaly_types:
    logical_inconsistency: 1.5
    temporal_anomaly: 1.1
    geographic_anomaly: 0.8

# –°—Ç–∞–ª–æ:
priority_weights:
  anomaly_types:
    logical_inconsistency: 0.9  # UPDATED: Reduced from 1.5 (many false positives)
    temporal_anomaly: 1.3       # UPDATED: Increased priority for temporal patterns
    geographic_anomaly: 0.7     # UPDATED: Reduced from 0.8 (Russia is naturally heterogeneous)
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**

1. **Logical inconsistency: 1.5 ‚Üí 0.9 (‚Üì40%)**
   - –ú–Ω–æ–≥–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π –¥–ª—è –ª–µ–≥–∏—Ç–∏–º–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
   - "–í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –Ω–∞—Å–µ–ª–µ–Ω–∏–∏" —á–∞—Å—Ç–æ –ª–µ–≥–∏—Ç–∏–º–Ω–æ
   - –ü—Ä–∏–º–µ—Ä—ã: —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∑–æ–Ω—ã, –≤–∞—Ö—Ç–æ–≤—ã–µ –ø–æ—Å–µ–ª–∫–∏, –ø—Ä–æ–º–∑–æ–Ω—ã

2. **Temporal anomaly: 1.1 ‚Üí 1.3 (‚Üë18%)**
   - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏ –≤–∞–∂–Ω–µ–µ —Ç–æ—á–µ—á–Ω—ã—Ö –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π
   - –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –ü–æ–ª–µ–∑–Ω—ã –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è

3. **Geographic anomaly: 0.8 ‚Üí 0.7 (‚Üì12%)**
   - –†–æ—Å—Å–∏—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –Ω–µ–æ–¥–Ω–æ—Ä–æ–¥–Ω–∞
   - –ú–Ω–æ–≥–∏–µ "–≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –∞–Ω–æ–º–∞–ª–∏–∏" - –Ω–æ—Ä–º–∞
   - –ü–æ–Ω–∏–∂–∞–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —ç—Ç–æ–≥–æ —Ç–∏–ø–∞

---

## 2Ô∏è‚É£ –ù–û–í–´–ï –§–ê–ô–õ–´

### ‚úÖ legitimate_patterns_config.yaml

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Whitelist —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π —Å –ª–µ–≥–∏—Ç–∏–º–Ω—ã–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏

**–°–æ–¥–µ—Ä–∂–∏—Ç 6 –∫–∞—Ç–µ–≥–æ—Ä–∏–π:**

1. **tourist_zones** (19 —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π)
   - –°–æ—á–∏, –ê–Ω–∞–ø–∞, –ì–µ–ª–µ–Ω–¥–∂–∏–∫, –Ø–ª—Ç–∞, –ö—Ä—ã–º, –ö–∞–≤–∫–∞–∑—Å–∫–∏–µ –ú–∏–Ω–≤–æ–¥—ã
   - –ü—Ä–∏—á–∏–Ω–∞: –ë–æ–ª—å—à–æ–π –ø–æ—Ç–æ–∫ —Ç—É—Ä–∏—Å—Ç–æ–≤ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º –Ω–∞—Å–µ–ª–µ–Ω–∏–∏

2. **shift_work_settlements** (12 —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π)
   - –ù–æ—Ä–∏–ª—å—Å–∫, –ù–æ–≤—ã–π –£—Ä–µ–Ω–≥–æ–π, –ù–∞–¥—ã–º, –ù–æ—è–±—Ä—å—Å–∫, –ú–∏—Ä–Ω—ã–π, –£–¥–∞—á–Ω—ã–π
   - –ü—Ä–∏—á–∏–Ω–∞: –í–∞—Ö—Ç–æ–≤—ã–µ —Ä–∞–±–æ—Ç–Ω–∏–∫–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –Ω–∞—Å–µ–ª–µ–Ω–∏–µ–º

3. **industrial_centers** (7 —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π)
   - –¢–æ–ª—å—è—Ç—Ç–∏, –ù–∞–±–µ—Ä–µ–∂–Ω—ã–µ –ß–µ–ª–Ω—ã, –ú–∞–≥–Ω–∏—Ç–æ–≥–æ—Ä—Å–∫, –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫
   - –ü—Ä–∏—á–∏–Ω–∞: –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∏ —Ç—Ä–∞–Ω–∑–∏—Ç–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ

4. **border_territories** (7 —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π)
   - –ë–µ–ª–≥–æ—Ä–æ–¥, –í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫, –ë–ª–∞–≥–æ–≤–µ—â–µ–Ω—Å–∫, –•–∞–±–∞—Ä–æ–≤—Å–∫
   - –ü—Ä–∏—á–∏–Ω–∞: –¢—Ä–∞–Ω–∑–∏—Ç–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∏ –ø—Ä–∏–≥—Ä–∞–Ω–∏—á–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è

5. **transport_hubs** (6 —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π)
   - –í–Ω—É–∫–æ–≤–æ, –®–µ—Ä–µ–º–µ—Ç—å–µ–≤–æ, –î–æ–º–æ–¥–µ–¥–æ–≤–æ, –•–∏–º–∫–∏, –ú—ã—Ç–∏—â–∏
   - –ü—Ä–∏—á–∏–Ω–∞: –¢—Ä–∞–Ω–∑–∏—Ç–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —É–∑–µ–ª

6. **remote_territories** (27 —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π)
   - –ë–∏–ª–∏–±–∏–Ω—Å–∫–∏–π, –ß—É–∫–æ—Ç–∫–∞, –Ø–∫—É—Ç–∏—è, –ö–∞–º—á–∞—Ç–∫–∞, –ö–æ–º–∞–Ω–¥–æ—Ä—ã
   - –ü—Ä–∏—á–∏–Ω–∞: –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–∞—è –ª–æ–≥–∏—Å—Ç–∏–∫–∞

**–í—Å–µ–≥–æ:** 78 —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π –≤ whitelist

**–õ–µ–≥–∏—Ç–∏–º–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:**
```yaml
legitimate_indicator_patterns:
  - "consumption_–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã"           # –û–Ω–ª–∞–π–Ω-–ø–æ–∫—É–ø–∫–∏ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π
  - "consumption_–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç"              # –¢—Ä–∞–Ω–∑–∏—Ç–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ
  - "consumption_–û–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ"   # –¢—É—Ä–∏–∑–º –∏ —Ç—Ä–∞–Ω–∑–∏—Ç
  - "market_access"                      # –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –Ω–µ–æ–¥–Ω–æ—Ä–æ–¥–Ω–æ—Å—Ç—å
```

---

### ‚úÖ src/legitimate_pattern_filter.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–æ–¥—É–ª—å –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ª–µ–≥–∏—Ç–∏–º–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

**–ö–ª–∞—Å—Å:** `LegitimatePatternFilter`

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**

1. **`is_legitimate_pattern(municipal_name, indicator)`**
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–∞—Ç—Ç–µ—Ä–Ω –ª–µ–≥–∏—Ç–∏–º–Ω—ã–º
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏ –ø—Ä–∏—á–∏–Ω—É, –µ—Å–ª–∏ –ª–µ–≥–∏—Ç–∏–º–Ω—ã–π

2. **`filter_anomalies(anomalies_df)`**
   - –§–∏–ª—å—Ç—Ä—É–µ—Ç DataFrame —Å –∞–Ω–æ–º–∞–ª–∏—è–º–∏
   - –ü–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç logical_inconsistency ‚Üí legitimate_pattern
   - –ü–æ–Ω–∏–∂–∞–µ—Ç severity_score –¥–æ 20 (–Ω–∏–∑–∫–∞—è —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å)

3. **`add_territory_to_whitelist(territory, category, reason)`**
   - –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é –≤ runtime
   - –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è

4. **`get_whitelist_summary()`**
   - –ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–¥–∫—É –ø–æ whitelist
   - –î–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –æ—Ç—á—ë—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```python
from src.legitimate_pattern_filter import LegitimatePatternFilter

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
filter = LegitimatePatternFilter()

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–∞
result = filter.is_legitimate_pattern("–°–æ—á–∏", "consumption_–û–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ")
if result:
    print(f"–õ–µ–≥–∏—Ç–∏–º–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω: {result['reason']}")

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∞–Ω–æ–º–∞–ª–∏–π
filtered_anomalies = filter.filter_anomalies(anomalies_df)
```

---

## 3Ô∏è‚É£ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –í –°–£–©–ï–°–¢–í–£–Æ–©–ò–ô –ö–û–î

### –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä –≤ main.py

**–î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ –¥–µ—Ç–µ–∫—Ü–∏–∏ –∞–Ω–æ–º–∞–ª–∏–π, –ø–µ—Ä–µ–¥ –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π:**

```python
# –í main.py, –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –¥–µ—Ç–µ–∫—Ç–æ—Ä–æ–≤

# === –ù–û–í–´–ô –ö–û–î ===
from src.legitimate_pattern_filter import LegitimatePatternFilter

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä
logger.info("Applying legitimate pattern filter...")
pattern_filter = LegitimatePatternFilter()

# –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∞–Ω–æ–º–∞–ª–∏–∏
all_anomalies = pattern_filter.filter_anomalies(
    all_anomalies,
    anomaly_type='logical_inconsistency'
)

# –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
legitimate_count = (all_anomalies['anomaly_type'] == 'legitimate_pattern').sum()
logger.info(f"Reclassified {legitimate_count} anomalies as legitimate patterns")

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å whitelist –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
pattern_filter.save_whitelist("output/whitelist_applied.yaml")
# === –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ö–û–î–ê ===

# –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤...
```

---

## 4Ô∏è‚É£ –ó–ê–ü–£–°–ö –°–ò–°–¢–ï–ú–´ –° –ù–û–í–´–ú–ò –ù–ê–°–¢–†–û–ô–ö–ê–ú–ò

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ config.yaml
git diff config.yaml

# –ò–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Ä—É—á–Ω—É—é
notepad config.yaml
```

### –®–∞–≥ 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–º–æ —Ñ–∏–ª—å—Ç—Ä–∞
python src/legitimate_pattern_filter.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
======================================================================
–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –§–ò–õ–¨–¢–†–ê –õ–ï–ì–ò–¢–ò–ú–ù–´–• –ü–ê–¢–¢–ï–†–ù–û–í
======================================================================

‚úì –°–æ—á–∏ - consumption_–û–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ
  –ö–∞—Ç–µ–≥–æ—Ä–∏—è: tourist_zones
  –ü—Ä–∏—á–∏–Ω–∞: –ë–æ–ª—å—à–æ–π –ø–æ—Ç–æ–∫ —Ç—É—Ä–∏—Å—Ç–æ–≤ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º –Ω–∞—Å–µ–ª–µ–Ω–∏–∏

‚úì –ù–æ—Ä–∏–ª—å—Å–∫ - consumption_–ü—Ä–æ–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ
  –ö–∞—Ç–µ–≥–æ—Ä–∏—è: shift_work_settlements
  –ü—Ä–∏—á–∏–Ω–∞: –í–∞—Ö—Ç–æ–≤—ã–µ —Ä–∞–±–æ—Ç–Ω–∏–∫–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –Ω–∞—Å–µ–ª–µ–Ω–∏–µ–º

‚úó –ú–æ—Å–∫–≤–∞ - consumption_–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã
  –ù–µ –≤ whitelist - –±—É–¥–µ—Ç –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –∞–Ω–æ–º–∞–ª–∏—è

...

–°–¢–ê–¢–ò–°–¢–ò–ö–ê WHITELIST
======================================================================
–í—Å–µ–≥–æ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π –≤ whitelist: 78
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å main.py —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
python main.py
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤—ã–≤–æ–¥–µ:**

```diff
- Total anomalies detected: 22,159
+ Total anomalies detected: ~2,500-3,500

- Municipalities affected: 2,659 (103%)
+ Municipalities affected: ~400-600 (15-20%)

Anomaly type distribution:
- geographic_anomaly: 39.8% ‚Üí ~25%
- statistical_outlier: 31.2% ‚Üí ~35%
- logical_inconsistency: 18.1% ‚Üí ~8%
+ legitimate_pattern: 0% ‚Üí ~12%
- cross_source_discrepancy: 10.9% ‚Üí ~20%

+ Auto-tuning: Optimized thresholds saved to output/tuned_thresholds.yaml
```

### –®–∞–≥ 4: –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∞
python analyze_anomalies.py
```

**–°—Ä–∞–≤–Ω–∏—Ç—å —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏:**
- –ë—ã–ª–æ: 22,159 –∞–Ω–æ–º–∞–ª–∏–π, 103% —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π
- –°—Ç–∞–ª–æ: ~2,500-3,500 –∞–Ω–æ–º–∞–ª–∏–π, 15-20% —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π

---

## 5Ô∏è‚É£ –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ False Positive Rate

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë—ã–ª–æ | –û–∂–∏–¥–∞–µ—Ç—Å—è | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|------|-----------|-----------|
| **–í—Å–µ–≥–æ –∞–Ω–æ–º–∞–ª–∏–π** | 22,159 | 2,500-3,500 | ‚Üì85-90% |
| **–ó–∞—Ç—Ä–æ–Ω—É—Ç–æ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π** | 2,659 (103%) | 400-600 (15-20%) | ‚Üì80-85% |
| **Geographic anomalies** | 8,826 (39.8%) | ~600-900 (25%) | ‚Üì85-90% |
| **Logical inconsistencies** | 4,013 (18.1%) | ~200-300 (8%) | ‚Üì90-95% |
| **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (>80)** | 7,834 (35.4%) | ~400-600 (15-20%) | ‚Üì80-85% |

### ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏

**Precision (—Ç–æ—á–Ω–æ—Å—Ç—å):**
- –ë—ã–ª–æ: ~30% (–∏–∑ 10 –∞–Ω–æ–º–∞–ª–∏–π 3 —Ä–µ–∞–ª—å–Ω—ã–µ, 7 –ª–æ–∂–Ω—ã–µ)
- –û–∂–∏–¥–∞–µ—Ç—Å—è: ~70-80% (–∏–∑ 10 –∞–Ω–æ–º–∞–ª–∏–π 7-8 —Ä–µ–∞–ª—å–Ω—ã—Ö)

**Actionability (–ø—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å):**
- –ë—ã–ª–æ: –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ—Ä–∞–±–æ—Ç–∞—Ç—å 22K –∞–Ω–æ–º–∞–ª–∏–π
- –û–∂–∏–¥–∞–µ—Ç—Å—è: 2.5K –∞–Ω–æ–º–∞–ª–∏–π –º–æ–∂–Ω–æ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–æ—Ä–∞–±–æ—Ç–∞—Ç—å

### ‚úÖ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–í—Ä–µ–º–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏–∑**
   - –¢—Ä–µ–Ω–¥—ã –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º
   - –°–µ–∑–æ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
   - –î–µ—Ç–µ–∫—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö —Å–¥–≤–∏–≥–æ–≤

2. **–£–º–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**
   - 78 —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π –≤ whitelist
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è
   - –ü—Ä–æ–∑—Ä–∞—á–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ

3. **–ê–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∞**
   - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –¥–∞–Ω–Ω—ã–µ
   - –¶–µ–ª–µ–≤–æ–π FPR 5%
   - –≠–∫—Å–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –ø–æ—Ä–æ–≥–æ–≤

---

## 6Ô∏è‚É£ –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –í–ê–õ–ò–î–ê–¶–ò–Ø

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
   ```python
   # –í output/anomalies_master_*.csv
   - Total anomalies
   - Anomalies per municipality (—Å—Ä–µ–¥–Ω–µ–µ)
   - Distribution by type
   - Distribution by severity
   ```

2. **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
   ```
   - –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ç–æ–ø-50 –∞–Ω–æ–º–∞–ª–∏–π
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–±–ª–µ–º—ã –∏–ª–∏ FP?
   - –û—Ü–µ–Ω–∏—Ç–µ % —Ä–µ–∞–ª—å–Ω–æ –ø–æ–ª–µ–∑–Ω—ã—Ö –Ω–∞—Ö–æ–¥–æ–∫
   ```

3. **Whitelist —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
   ```python
   # –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –ø–µ—Ä–µ–∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏
   legitimate_patterns = df[df['anomaly_type'] == 'legitimate_pattern']
   print(f"Filtered out: {len(legitimate_patterns)}")
   ```

### –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç–µ –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è:

1. **–î–æ–±–∞–≤–∏—Ç—å –≤ whitelist:**
   ```python
   pattern_filter.add_territory_to_whitelist(
       territory_name="–ù–æ–≤–∞—è –¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è",
       category="custom_category",
       reason="–°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è –ø—Ä–∏—á–∏–Ω–∞"
   )
   ```

2. **–£–∂–µ—Å—Ç–æ—á–∏—Ç—å –ø–æ—Ä–æ–≥–∏:**
   ```yaml
   # –í config.yaml
   thresholds:
     geographic:
       regional_z_score: 4.0  # –ï—â—ë –º—è–≥—á–µ
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ:**
   ```bash
   # Auto-tuning –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç –ø–æ—Ä–æ–≥–∏
   python main.py
   ```

---

## 7Ô∏è‚É£ –û–¢–ö–ê–¢ –ò–ó–ú–ï–ù–ï–ù–ò–ô (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å—Ç–∞—Ä—ã–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º:

```bash
# –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –Ω–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
cp config.yaml config_optimized.yaml

# –û—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git checkout config.yaml

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é –∏–∑–º–µ–Ω–∏—Ç—å:
# - detection_profile: "relaxed" ‚Üí "normal"
# - auto_tuning.enabled: true ‚Üí false
# - temporal.enabled: true ‚Üí false
# - geographic.regional_z_score: 3.5 ‚Üí 2.0
# - geographic.cluster_threshold: 4.0 ‚Üí 2.5
```

---

## 8Ô∏è‚É£ –î–ê–õ–¨–ù–ï–ô–®–ò–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –Ω–µ–¥–µ–ª–∏)

1. ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞ –≤ main.py** (—Å–º. —Ä–∞–∑–¥–µ–ª 3)
2. ‚è≥ **–°–æ–∑–¥–∞–Ω–∏–µ –∑–æ–ª–æ—Ç–æ–≥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞** (100-200 —Ä–∞–∑–º–µ—á–µ–Ω–Ω—ã—Ö —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π)
3. ‚è≥ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ precision/recall** –≤ –æ—Ç—á—ë—Ç—ã
4. ‚è≥ **Dashboard –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞** (Streamlit/Dash)

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (1-2 –º–µ—Å—è—Ü–∞)

1. ‚è≥ **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏–∑:**
   - ARIMA/Prophet –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
   - Change point detection
   - –°–µ–∑–æ–Ω–Ω–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è

2. ‚è≥ **–£–ª—É—á—à–µ–Ω–Ω—ã–π geographic detector:**
   - –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º
   - k-NN —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å "–ø–æ—Ö–æ–∂–∏–º–∏" —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è–º–∏
   - –£—á—ë—Ç –∫–ª–∏–º–∞—Ç–∞, —É–¥–∞–ª—ë–Ω–Ω–æ—Å—Ç–∏, –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏

3. ‚è≥ **Feedback loop:**
   - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–º–µ—Ç–∫–∏ TP/FP
   - –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ feedback

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (3+ –º–µ—Å—è—Ü–∞)

1. ‚è≥ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–Ω–µ—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö:**
   - –ü–æ–≥–æ–¥–∞ (–æ–±—ä—è—Å–Ω—è–µ—Ç —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å)
   - –ü—Ä–∞–∑–¥–Ω–∏–∫–∏/—Å–æ–±—ã—Ç–∏—è
   - –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

2. ‚è≥ **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø–æ–≤–µ—Ä—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**
   - –û—Ü–µ–Ω–∫–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –≤—ã–≥–æ–¥—ã
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–µ–π—Å—Ç–≤–∏—è–º
   - ROI –∞–Ω–∞–ª–∏–∑

3. ‚è≥ **Machine Learning –¥–µ—Ç–µ–∫—Ç–æ—Ä—ã:**
   - Isolation Forest
   - Autoencoders –¥–ª—è –∞–Ω–æ–º–∞–ª–∏–π
   - Ensemble –º–µ—Ç–æ–¥—ã

---

## üìä –†–ï–ó–Æ–ú–ï

### –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `config.yaml` (5 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π)  
‚úÖ –°–æ–∑–¥–∞–Ω `legitimate_patterns_config.yaml` (78 —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π)  
‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `src/legitimate_pattern_filter.py`  
‚úÖ –ù–∞–ø–∏—Å–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è `CHANGES_APPLIED.md`  
‚úÖ –°–æ–∑–¥–∞–Ω –∞–Ω–∞–ª–∏–∑ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ `methodology_assessment.md`

### –û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç

- **–°–Ω–∏–∂–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π –Ω–∞ 85-90%** (22K ‚Üí 2.5K)
- **FPR: 103% ‚Üí 15-20%** (–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)
- **Precision: 30% ‚Üí 70-80%** (–∫–∞—á–µ—Å—Ç–≤–æ –¥–µ—Ç–µ–∫—Ü–∏–∏)
- **Actionability:** –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø—Ä–æ—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ –Ω–∞—Ö–æ–¥–∫–∏

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å `python main.py` —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ—Ä–µ–∑ `python analyze_anomalies.py`
3. ‚úÖ –°—Ä–∞–≤–Ω–∏—Ç—å —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
4. ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä –≤ `main.py` (—Å–º. —Ä–∞–∑–¥–µ–ª 3)
5. ‚è≥ –°–æ–∑–¥–∞—Ç—å –∑–æ–ª–æ—Ç–æ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

---

**–ê–≤—Ç–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π:** Cascade AI  
**–î–∞—Ç–∞:** 2 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
